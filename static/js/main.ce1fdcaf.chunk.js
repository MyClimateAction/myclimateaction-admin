(this["webpackJsonpmyclimateaction-admin"]=this["webpackJsonpmyclimateaction-admin"]||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports=a(20)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(7),i=a.n(r),o=(a(14),a(8)),l=a(1),s=a(2),u=a(4),m=a(3),h=a(5),d=(a(15),a(16),function(t){function e(){var t,a;Object(l.a)(this,e);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(c)))).state={tokenString:""},a.onTypeChange=function(t){a.setState({tokenString:t.target.value})},a.handleSubmit=function(t){t.preventDefault(),a.props.onAccess(a.state.tokenString)},a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return c.a.createElement("form",{className:"Auth-container",onSubmit:this.handleSubmit},c.a.createElement("label",{className:"Auth-item"},"My climate action admin"),c.a.createElement("input",{className:"Auth-item",onChange:this.onTypeChange,type:"password",placeholder:"Enter auth token"}),c.a.createElement("button",{className:"Auth-item",type:"submit",id:"submit"},"Access"))}}]),e}(n.Component)),p=(a(17),function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return c.a.createElement("header",{className:"TopBar-container"},c.a.createElement("h2",{className:"TopBar-item"},"actions"),c.a.createElement("h1",{className:"TopBar-item"},"MYCLIMATEACTION"),c.a.createElement("button",{className:"TopBar-item",onClick:this.props.logout},"logout"))}}]),e}(n.Component)),E=(a(18),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).handleEdit=function(){a.setState({isEdit:!0})},a.handleDone=function(t){var e=t.target.name,n=t.target.picture_url,c=t.target.frequency;a.setState({isEdit:!1,name:e,picture_url:n,frequency:c})},a.state={isEdit:!1,name:"",picture_url:"",frequency:""},a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.setState({isEdit:!1,name:this.props.name,picture_url:this.props.picture_url,frequency:this.props.frequency})}},{key:"render",value:function(){return c.a.createElement("tr",{key:this.props.id},this.state.isEdit&&c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:"rowTd"},c.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleDone})),c.a.createElement("td",{className:"rowTd"},c.a.createElement("input",{type:"text",name:"frequency",value:this.state.frequency,onChange:this.handleDone})),c.a.createElement("td",{className:"rowTd"},c.a.createElement("input",{type:"text",name:"picture_url",value:this.state.picture_url,onChange:this.handleDone})),c.a.createElement("td",{className:"rowTd"},this.props.votes),c.a.createElement("td",{className:"rowTd"},c.a.createElement("button",{onClick:this.handleDone},"Done"))),!this.state.isEdit&&c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:"rowTd"},this.props.name),c.a.createElement("td",{className:"rowTd"},this.props.frequency),c.a.createElement("td",{className:"rowTd"},this.props.picture_url),c.a.createElement("td",{className:"rowTd"},this.props.votes),c.a.createElement("td",null,c.a.createElement("button",{onClick:this.handleEdit},"Edit"))))}}]),e}(n.Component)),f=(a(19),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).returnTableData=function(){var t,e=a.props.data;return t=e.length?e.map((function(t){return c.a.createElement(E,{key:t.id,id:t.id,name:t.title,frequency:t.frequency,picture_url:t.picture_url,votes:10})})):c.a.createElement("p",null,"No data"),c.a.createElement("table",{className:"Actions-List"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"Actions-tr"},c.a.createElement("td",null,"Name"),c.a.createElement("td",null,"Frequency"),c.a.createElement("td",null,"Image"),c.a.createElement("td",null,"Votes"),c.a.createElement("td",null,"Action"))),c.a.createElement("tbody",null,t))},a.state={actions:[]},a}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return c.a.createElement("div",null,this.returnTableData(this.state.actions),c.a.createElement("button",null,"Add an Action"))}}]),e}(n.Component)),b=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(u.a)(this,Object(m.a)(e).call(this))).checkAuth=function(e){var a="MyClimateActionAdmin2019!"===e;t.setState({auth:a}),t.fetchData()},t.fetchData=function(){fetch("http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/myclimateaction-admin"}).REACT_APP_API_URL,"/actions")).then((function(t){return t.json()})).then((function(e){t.setState({actions:e.data,loading:!1})})).catch((function(t){console.log("Error fetching and parsing data.",t)}))},t.fetchAuth=function(){fetch("http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/myclimateaction-admin"}).REACT_APP_API_URL,"/auth"))},t.handleLogout=function(){t.setState({actions:[],auth:!1})},t.handleModifyAction=function(e){t.setState((function(t){return{actions:t}}))},t.handleAddAction=function(e,a,n){t.setState((function(c){return{actions:[].concat(Object(o.a)(c.actions),[t.createActionObject(e,a,n)])}}))},t.createActionObject=function(t,e,a){return{title:t,picture_url:e,frequency:a}},t.state={actions:[],loading:!1,auth:!1},t}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.checkAuth()&&this.fetchData()}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},!this.state.auth&&c.a.createElement("div",{className:"Content"},c.a.createElement(d,{onAccess:this.checkAuth})),this.state.auth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{logout:this.handleLogout}),c.a.createElement("div",{className:"Content"},c.a.createElement("h2",null,"Manage actions"),this.state.loading?c.a.createElement("p",null,"Loading..."):c.a.createElement(f,{data:this.state.actions}))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.ce1fdcaf.chunk.js.map